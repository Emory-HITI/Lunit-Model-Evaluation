scr_det_cancer = "Screen Det. Cancer"
scr_det_cancer_n = "Screen Det.\nCancer"

bx_prov_benign = "Bx. Proven Benign"
bx_prov_benign_n = "Bx. Proven\nBenign"

non_inv_cancer = "DCIS"
non_inv_cancer_n = "DCIS"

category_colors_map = {
                            'Screen Negative': 'green',  # Light green
                            'Diagnostic Negative': 'blue',          # Light blue
                            bx_prov_benign: 'orange',     # Light orange
                            scr_det_cancer: 'red'      # Light red
                      }


outcome_categories_list = ['Screen Negative', 'Diagnostic Negative', bx_prov_benign, scr_det_cancer]


calfind_labels = {
    'A': 'Amorphous',
    'B': 'Fine linear-branching',
    'C': 'Course Popcorn',
    'D': 'Dystrophic',
    'E': 'Rim',
    'F': 'Fine-linear (G)',
    'G': 'Generic',
    'H': 'Coarse hetero',
    'I': 'Fine pleomorph',
    'J': 'Oil Cyst',
    'K': 'Pleomorphic',
    'L': 'Large Rodlike',
    'M': 'Milk of calcium',
    'O': 'Lucent-center',
    'P': 'Punctate',
    'Q': 'Coarse',
    'R': 'Round',
    'S': 'Skin',
    'U': 'Suture',
    'V': 'Vascular',
    '9': 'Benign'
}


massmargin_map = {
    "D": "Circumscribed",
    "U": "Obscured",
    "M": "Microlobulated",
    "I": "Indistinct",
    "S": "Spiculated"
}

calcdistri_mapping = {
    "G": "Grouped",
    "S": "Segmental",
    "R": "Regional",
    "D": "Diffuse/scattered",
    "L": "Linear",
    "C": "Clustered"
}

# Define the mapping from codes to meanings
massshape_mapping = {
    'G': 'Generic',
    'R': 'Round',
    'O': 'Oval',
    'X': 'Irregular',
    'Q': 'Questioned architectural distortion',
    'A': 'Architectural distortion',
    'T': 'Asymmetric tubular structure/solitary dilated duct',
    'N': 'Intramammary lymph node',
    'B': 'Global asymmetry',
    'F': 'Focal asymmetry',
    'S': 'Asymmetry',
    'V': 'Developing asymmetry',
    'Y': 'Lymph Node'
}



severity_labels = {0: 'Invasive\nCancer',
                     1: 'Non-Invasive\nCancer',
                     2: 'High-Risk\nLesion',
                     3: 'Borderline\nLesion',
                     4: 'Benign\nFindings',
                     5: 'Negative'}


tissueden_br_map = {1: "A",
                    2: "B",
                    3: "C",
                    4: "D"}


# Dictionary with values used for sorting
key_order = {
 'AB': [4],
 'AD': [4],
 'ADM': [4],
 'AM': [4],
 'AMY': [4],
 'AN': [4],
 'ANA': [4],
 'ANH': [4],
 'APC': [4],
 'BBP': [4],
 'BC': [4],
 'BCB': [4],
 'BCL': [4],
 'BEN': [4],
 'BP': [4],
 'BXC': [4],
 'CCC': [4],
 'DE': [4],
 'DF': [4],
 'DHU': [4],
 'EC': [4],
 'ED': [4],
 'FA': [4],
 'FAC': [4],
 'FAH': [4],
 'FAL': [4],
 'FB': [4],
 'FBS': [4],
 'FC': [4],
 'FF': [4],
 'FM': [4],
 'FN': [4],
 'GA': [4],
 'GCR': [4],
 'GM': [4],
 'GYN': [4],
 'HA': [4],
 'HE': [4],
 'HEM': [4],
 'HES': [4],
 'HEV': [4],
 'HM': [4],
 'HY': [4],
 'IF': [4],
 'IMN': [4],
 'IN': [4],
 'JF': [4],
 'LA': [4],
 'LB': [4],
 'LC': [4],
 'LH': [4],
 'LM': [4],
 'LN': [4],
 'MAS': [4],
 'MFB': [4],
 'MGA': [4],
 'NBT': [4],
 'ND': [4],
 'NFA': [4],
 'PSH': [4],
 'PT': [4],
 'SA': [4],
 'SBT': [4],
 'SCL': [4],
 'SE': [4],
 'SF': [4],
 'ST': [4],
 'TA': [4],
 'TR': [4],
 'AME': [3],
 'APH': [3],
 'FEL': [3],
 'GC': [3],
 'NPA': [3],
 'PL': [3],
 'ADH': [2],
 'ALH': [2],
 'APA': [2],
 'CP': [2],
 'CSL': [2],
 'FEA': [2],
 'JP': [2],
 'LP': [2],
 'LS': [2],
 'MIP': [2],
 'MP': [2],
 'PA': [2],
 'PDP': [2],
 'RS': [2],
 'ADC': [0],
 'ADE': [0],
 'AP': [0],
 'B': [0],
 'BVI': [0],
 'CC': [0],
 'CED': [0],
 'CM': [0],
 'CMT': [0],
 'I': [0],
 'ICC': [0],
 'ID': [0],
 'IDC': [0],
 'II': [0],
 'IL': [0],
 'IMC': [0],
 'INC': [0],
 'IPC': [0],
 'LVI': [0],
 'MC': [0],
 'MIC': [0],
 'PTM': [0],
 'RM': [0],
 'SCT': [0],
 'TC': [0],
 'DC': [1],
 'DCC': [1],
 'DCH': [1],
 'DCL': [1],
 'DMP': [1],
 'ICP': [1],
 'MDC': [1],
 'PC': [1],
 'PD': [1],
 'ANL': [5],
 'ANM': [5],
 'AS': [5],
 'CS': [5],
 'HL': [5],
 'LI': [5],
 'LMS': [5],
 'LPS': [5],
 'LY': [5],
 'MB': [5],
 'MBL': [5],
 'MBM': [5],
 'MBO': [5],
 'MBS': [5],
 'MDN': [5],
 'MIM': [5],
 'NHL': [5],
 'SCN': [5],
 'SQ': [5]
}



pathology_labels = {
    'AB': 'Abscess',
    'AD': 'Adenosis',
    'ADC': 'Adenoid cystic carcinoma',
    'ADE': 'Adenocarcinoma',
    'ADH': 'Atypical ductal hyperplasia',
    'ADM': 'Adenoma',
    'AL': 'Adenolipoma',
    'ALH': 'Atypical lobular hyperplasia',
    'AM': 'Apocrine metaplasia',
    'AME': 'Adenomyoepithelloma',
    'AMY': 'Amyloid (tumor)',
    'AN': 'Normal axillary node',
    'ANA': 'Angiolipoma',
    'ANC': 'Axillary node with calcifications',
    'ANG': 'Angiomatosis',
    'ANH': 'Axillary node hyperplasia',
    'ANL': 'Axillary node with lymphoma',
    'ANM': 'Axillary nodal metastases',
    'AP': 'Apocrine carcinoma',
    'APA': 'Atypical papilloma',
    'APC': 'Apocrine cyst',
    'APH': 'Atypical Lymphoid Hyperplasia',
    'AS': 'Angiosarcoma',
    'ASI': 'Asynchronous involution',
    'B': 'Breast Cancer',
    'BBP': 'Benign breast tissue',
    'BC': 'Benign cyst',
    'BCB': 'Benign cyst with blood',
    'BCL': 'Benign calcifications',
    'BCN': 'Basal cell carcinoma of the nipple',
    'BEN': 'Benign',
    'BP': 'Breast parenchyma',
    'BVI': 'Blood vessel (vascular) Invasion',
    'BXC': 'Biopsy site changes',
    'CC': 'Colloid (mucinous) carcinoma',
    'CCC': 'Columnar cell change',
    'CCH': 'Carcinoma in children',
    'CDS': 'Chondrosarcoma',
    'CEB': 'Carcinoma in ectopic breast',
    'CED': 'Carcinoma with endocrine differentiation',
    'CH': 'Chondroma',
    'CI': 'Comedocarcinoma (intraductal)',
    'CL': 'Calcified lymph node',
    'CM': 'Carcinoma in males',
    'CMT': 'Carcinoma with metaplasia',
    'COT': 'Cartilaginous and osseous change',
    'CP': 'Intracystic papilloma',
    'CPL': 'Carcinoma in pregnancy and lactation',
    'CS': 'Carcinosarcoma',
    'CSL': 'Complex sclerosing lesion',
    'DA': 'Ductal adenoma',
    'DC': 'DCIS',
    'DCC': 'DCIS with comedonecrosis',
    'DCH': 'DCIS, high grade',
    'DCL': 'DCIS, low grade',
    'DE': 'Ductal ectasia',
    'DF': 'Diabetic fibrous mastopathy',
    'DHU': 'Ductal hyperplasia, Usual',
    'DMP': 'DCIS micro-papillary',
    'DS': 'Ductal carcinoma in-situ (DCIS)',
    'EAD': 'Extra abdominal desmoid',
    'EBT': 'Ectopic (accessory) breast tissue',
    'EC': 'Epidermal inclusion cyst',
    'ED': 'Edema',
    'FA': 'Fibroadenoma',
    'FAC': 'Fibroademotoid change',
    'FAH': 'Fibroadenomatoid hyperplasia',
    'FAL': 'Fibroadenolipoma/hamartoma',
    'FB': 'Foreign body (reaction)',
    'FBS': 'Fibrosis',
    'FC': 'Fibrocystic',
    'FEA': 'Flat epithelial atypia',
    'FEL': 'Fibroepithelial lesion',
    'FF': 'Focal fibrosis',
    'FM': 'Fibromatosis',
    'FN': 'Fat necrosis',
    'FS': 'Fibrosarcoma',
    'GA': 'Galactocele',
    'GC': 'Granular cell tumor',
    'GCR': 'Giant cell reaction',
    'GF': 'Giant fibroadenoma',
    'GM': 'Granulomatous Mastitis',
    'GRC': 'Glycogen-rich carcinoma',
    'GYN': 'Gynecomastia',
    'HA': 'Hamartoma',
    'HAP': 'Hemanglopericytoma',
    'HE': 'Hematoma',
    'HEM': 'Hemorrhage',
    'HES': 'Hemangioma - nonparenchymal, subcutaneous',
    'HEV': 'Hemangioma - venous',
    'HL': 'Hodgkin\'s Lymphoma',
    'HM': 'Hemangioma',
    'HY': 'Hyperplasia, usual',
    'I': 'Invasive mammary carcinoma',
    'IC': 'Intracystic carcinoma',
    'ICC': 'Invasive cribriform carcinoma',
    'ICP': 'Intracystic papillary carcinoma',
    'ID': 'Invasive ductal carcinoma',
    'IDC': 'Invasive ductal adenocarcinoma',
    'IF': 'Inflammation',
    'II': 'Invasive and in-situ carcinoma',
    'IL': 'Invasive lobular carcinoma',
    'IMC': 'Invasive Mucinous Carcinoma',
    'IMN': 'Intramammary lymph node',
    'IN': 'Infarct',
    'INC': 'Inflammatory carcinoma',
    'IPC': 'Invasive papillary carcinoma',
    'JF': 'Juvenile fibroadenoma',
    'JP': 'Juvenile papillomatosis',
    'LA': 'Lactating adenoma',
    'LB': 'Lipoma of the breast',
    'LC': 'Lactational change',
    'LH': 'Lobular hyperplasia',
    'LI': 'Leukemic infiltration',
    'LM': 'Leiomyoma',
    'LMS': 'Leiomyosarcoma',
    'LN': 'Lymph node',
    'LP': 'Large duct papilloma',
    'LPS': 'Liposarcoma',
    'LRC': 'lipid-rich (lipid-secreting) carcinoma',
    'LS': 'Lobular carcinoma in-situ (LCIS)',
    'LVI': 'Lymphatic vessel invasion',
    'LY': 'Lymphoma',
    'MAS': 'Mastitis',
    'MB': 'Metastatic cancer to the breast',
    'MBC': 'Metastatic cancer to the breast from the colon',
    'MBL': 'Metastatic cancer to the breast from the lung',
    'MBM': 'Metastatic melanoma to the breast',
    'MBO': 'Metastatic cancer to the breast from the ovary',
    'MBS': 'Metastatic sarcoma to the breast',
    'MC': 'Medullary carcinoma',
    'MD': 'Mondor\'s disease (thrombophlebitis)',
    'MDC': 'Multifocal intraductal carcinoma',
    'MDN': 'Metastatic disease to axillary node',
    'MFB': 'Myofibroblastoma',
    'MFH': 'Malignant fibrous histiocytoma',
    'MGA': 'Microglandular adenosls',
    'MH': 'Malingnant fibrous hystiocytoma',
    'MIC': 'Multifocal invasive ductal carcinoma',
    'MIM': 'Metastasis to an intramammary lymph node',
    'MIP': 'Multiple intraductal papillomas',
    'MMN': 'Malignant melanoma of the nipple',
    'MP': 'Microscopic Papilloma',
    'NA': 'No abnormality',
    'NBT': 'Normal breast tissue',
    'ND': 'Non-diagnostic',
    'NFA': 'Neurofibroma',
    'NFS': 'Neurofibromatosis',
    'NHL': 'Non-Hodgkin lymphoma',
    'NMS': 'Neoplasm of the mammary skin',
    'NOS': 'Not otherwise specified',
    'NPA': 'Nipple adenoma',
    'OC': 'Oil cyst (fat necrosis cyst)',
    'OS': 'Osteogenic sarcoma',
    'PA': 'Papilloma',
    'PC': 'Papillary carcinoma in-situ',
    'PD': 'Paget\'s disease (of the nipple)',
    'PDP': 'Peripheral duct papillomas',
    'PL': 'Pleomorphic adenoma',
    'PLS': 'Plasmacytoma',
    'PRM': 'Post reduction mammoplasty',
    'PSH': 'Pseudoangiomatous stromal hyperplasia',
    'PT': 'Phylloides tumor',
    'PTM': 'Phylloides tumor - malignant',
    'RM': 'Recurrent malignancy',
    'RS': 'Radial scar',
    'SA': 'Sclerosing adenosis',
    'SBT': 'Sclerotic breast tissue',
    'SC': 'Signet cell carcinoma',
    'SCL': 'Sclerosis',
    'SCN': 'Squamous cell carcinoma of the nipple',
    'SCT': 'Spindle cell tumor',
    'SE': 'Seroma',
    'SF': 'Stromal fibrosis',
    'SG': 'Silicone granuloma',
    'SJC': 'Secretory (juvenile) carcinoma',
    'SQ': 'Squamous carcinoma',
    'ST': 'Scar tissue',
    'TA': 'Tubular adenoma',
    'TC': 'Tubular carcinoma',
    'TR': 'Treatment effect',
    'VGH': 'Virginal hyperplasia'
}


import re
# Function to convert text to title case, ensuring words in brackets are also capitalized
def to_title_case(text):
    # Split the main text and any bracketed part separately
    parts = re.split(r"(\(.*?\))", text)  # This will keep the brackets in the list

    # Convert each part to title case
    processed_parts = [part.title() if not part.startswith('(') else part.lower().capitalize() for part in parts]

    # Ensure words inside brackets are also capitalized properly
    final_parts = []
    for part in processed_parts:
        if part.startswith('(') and part.endswith(')'):
            part = '(' + part[1:-1].title() + ')'  # Capitalize each word inside the brackets
        final_parts.append(part)

    # Join back the parts
    return ''.join(final_parts)



pathology_labels = {k: to_title_case(v) for k, v in pathology_labels.items()}